<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="bootstrap-5.3.3-dist/css/bootstrap.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.7.2/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="css/Principal.css">
    <link rel="stylesheet" href="css/desp.css">
    

</head>


<style>
    @font-face {
  font-family: 'MiFuente';
  src: url('tipografias/berbel-serif.ttf') format('truetype');
}
        @font-face {
  font-family: 'si';
  src: url('tipografias/Kiona-Regular.ttf') format('truetype');
}

a{
  font-family: si;
}
</style>
<body>
  <!-- encabezado-->
<div class="container-fluid">
  <div class="contenedor_encabezado"> 
  
<div class="logo"><a href="index.html"><img src="img/siu.png" alt=""></a></div>
  
    <div class="titulo">
      <h1>CTX</h1>
    </div>

 <div class="sesion" id="estado-sesion">
  <!-- El contenido se llenará con JS -->
</div>

    <div class="carro">
  

    </div>



  </div>
<div class="desplazar">
  <a class="nav-link active menu-icon" onclick="openNav()" style="color: white;">
    <i class="fa-solid fa-bars fa-2x"></i>
  </a>
</div>

</div>

<div class="linea" ></div>





<!-- SIDEBAR PARA JEFE -->
<div id="sidebar-jefe" class="sidebar" >
  <span class="closebtn" onclick="closeNav()">&times;</span>
  <a href="index.html">Inicio</a>
  <a href="#" onclick="toggleSubmenu('submenu-Tipos')">Usuarios <i class="fa-solid fa-caret-down"></i></a>
  <ul id="submenu-Tipos" style="display: none; padding-left: 20px;">
    <li><a class="dropdown-item" href="Listado_de_empleados.html">Empleados</a></li>
    <li><a class="dropdown-item" href="Listado_de_compradores.html">Compradores</a></li>
  </ul>
  <a href="tareas.html">Asignaciones</a>
  <a href="agregar_productos.html">Agregar Producto</a>
    <a href="Opiniones.html">Opiniones</a>
</div>

<!-- SIDEBAR PARA COMPRADOR -->
<div id="sidebar-comprador" class="sidebar" style="display: none;">
      <span class="closebtn" onclick="closeNav()">&times;</span>
      <a href="index.html">Inicio</a>
      <a href="productoss.html">Productos</a>
      <a href="#" onclick="toggleSubmenu('submenu-motos')">Motos <i class="fa-solid fa-caret-down"></i></a>
<ul id="submenu-motos" style="display: none; padding-left: 20px;">
  <li><a class="dropdown-item" href="Cross.html">Cross  </a></li>
  <li><a class="dropdown-item" href="Adveture.html">Adventure  </a></li>
  <li><a class="dropdown-item" href="Deportivas.html">deportiva  </a></li>
  <li><a class="dropdown-item" href="Nakes.html">Naked  </a></li>
  <li><a class="dropdown-item" href="Chopper.html">Choper  </a></li>
  <li><a class="dropdown-item" href="Scooters.html">Scooters</a></li>
  <li><a class="dropdown-item" href="Doble Proposito.html">Doble Proposito</a></li>


</ul>

<a href="#" onclick="toggleSubmenu('submenu-marcas')">Marcas <i class="fa-solid fa-caret-down"></i></a>
<ul id="submenu-marcas" style="display: none; padding-left: 20px;">
  <li><a class="dropdown-item" href="Yamaha.html">Yamaha</a></li>
  <li><a class="dropdown-item" href="Ducatiiiiii.html">Ducati</a></li>
  <li><a class="dropdown-item" href="Kawasaki.html">Kawasaki</a></li>
  <li><a class="dropdown-item" href="MV Agusta.html">MV Agusta</a></li>
  <li><a class="dropdown-item" href="Harley davison.html">Harley davison</a></li>
  <li><a class="dropdown-item" href="Honda.html">Honda</a></li>
</ul>


      <a href="contactos.html">Contacto</a>
    
  <!-- Menú motos, marcas, tipos... -->
</div>

<!-- SIDEBAR PARA EMPLEADO (si tienes uno) -->
<div id="sidebar-empleado" class="sidebar" style="display: none;">
   <span class="closebtn" onclick="closeNav()">&times;</span>
  <a href="index.html">Inicio</a>
  <!-- Contenido para empleado -->
      <a href="tareas empleados.html">Asignaciones</a>
        <a href="agregar producto emp.html">Agregar Producto</a>
</div>


<section class="intro p-4 text-center" id="intro-dinamico">




</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script src="est/js/bootstrap.bundle.min.js"></script>
  <script>
    function openNav() {
      document.getElementById("mySidebar").style.right = "0";
    }
    function closeNav() {
      document.getElementById("mySidebar").style.right = "-350px";
    }
    function toggleCursos() {
      const submenu = document.getElementById("submenu-cursos");
      submenu.style.display = submenu.style.display === "none" ? "block" : "none";
    }
  </script>
  <script>



  let prevScrollPos = window.pageYOffset;
  const navbar = document.getElementById("mainNavbar");

  window.onscroll = function () {
    const currentScrollPos = window.pageYOffset;

    if (prevScrollPos > currentScrollPos) {
      // Subiendo: mostrar navbar
      navbar.style.top = "0";
    } else {
      // Bajando: ocultar navbar
      navbar.style.top = "2120px"; // Ajusta según la altura del navbar
    }

    prevScrollPos = currentScrollPos;
  };


  function openNav() {
  const sidebar = document.getElementById("mySidebar");
  sidebar.style.display = "block"; // Mostrarlo
  setTimeout(() => { // Esperar para activar la animación
    sidebar.classList.add("open");
  }, 10);
}

function closeNav() {
  const sidebar = document.getElementById("mySidebar");
  sidebar.classList.remove("open"); // Quitar la clase de visible (se mueve fuera)
  sidebar.addEventListener(
    "transitionend",
    () => {
      sidebar.style.display = "none"; // Ocultar completamente tras animación
    },
    { once: true }
  );
}

</script>
<script>


  function toggleSubmenu(id) {
    const submenu = document.getElementById(id);
    submenu.style.display = submenu.style.display === "none" ? "block" : "none";
  }
</script>

<script>



const userData = querySnapshot.docs[0].data();
const tipo = userData.tipo?.toLowerCase() || "";

localStorage.setItem("tipoCuenta", tipo);
localStorage.setItem("nombreUsuario", userData.nombre);
localStorage.setItem("emailUsuario", userData.email); // si tienes el campo


// en cada página protegida
document.addEventListener("DOMContentLoaded", () => {
  const tipo = localStorage.getItem("tipoCuenta");
  if (!tipo) {
    window.location.href = "login.html"; // redirige si no hay sesión
  }
});


function cerrarSesion() {
  localStorage.clear();
  window.location.href = "login.html";
}










function openNav() {
  const tipo = localStorage.getItem('tipoCuenta');
  closeAllSidebars();

  if (tipo === 'jefe') {
    document.getElementById('sidebar-jefe').style.display = 'block';
  } else if (tipo === 'comprador') {
    document.getElementById('sidebar-comprador').style.display = 'block';
  } else if (tipo === 'empleado') {
    document.getElementById('sidebar-empleado').style.display = 'block';
  }
}

function closeNav() {
  closeAllSidebars();
}

function closeAllSidebars() {
  document.getElementById('sidebar-jefe').style.display = 'none';
  document.getElementById('sidebar-comprador').style.display = 'none';
  document.getElementById('sidebar-empleado').style.display = 'none';
}
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const tipo = localStorage.getItem("tipoCuenta");
  const estadoSesion = document.getElementById("estado-sesion");

  if (!tipo) {
    estadoSesion.innerHTML = `
      <a href="inicio de sesion.html">
        <i class="fa-solid fa-circle-user"></i> Iniciar sesión
      </a>
    `;
  } else {
    const nombre = localStorage.getItem("nombreUsuario") || "Usuario";
    estadoSesion.innerHTML = `
      <a href="#" onclick="cerrarSesion()" style="font-family: si;">
        <i class="fa-solid fa-circle-user"></i> Cerrar sesión (${nombre})
      </a>
    `;
  }
});

function cerrarSesion() {
  localStorage.clear();
  window.location.href = "inicio de sesion.html";
}
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const tipo = localStorage.getItem("tipoCuenta");
  const nombre = localStorage.getItem("nombreUsuario") || "Usuario";
  const intro = document.getElementById("intro-dinamico");

  if (!intro) return;

  if (!tipo) {
    intro.innerHTML = `
      <h2 style="font-family: si;">Bienvenido a</h2> 
      <h2 style="font-family: MiFuente;">CTX</h2>
      <br><br>
      <p style="font-family: si;">
        En <strong>CTX</strong > somos una empresa apasionada por las motocicletas. Desde nuestros inicios, nos hemos dedicado a ofrecer a nuestros clientes <strong>motos de alta calidad</strong>, tanto para quienes buscan su primera compañera de dos ruedas como para los amantes de la velocidad y la aventura.
      </p><br><br>
      <p style="font-family: si;">
        Contamos con una amplia gama de modelos urbanos, deportivos, touring y más, de marcas reconocidas como <strong>Yamaha, Kawasaki, Honda</strong> y <strong>Ducati</strong>. Nuestro equipo está aquí para ayudarte a encontrar la moto ideal para tu estilo de vida.
      </p>
    `;
  } else {
    let contenido = `
       <h2 style="font-family: si;">Bienvenido, <span style="color: #4169e1;  font-family: si; ">${nombre}</span> </h2>
      <h2 style="font-family: MiFuente;">CTX</h2>
      <br><br>
    `;

    if (tipo === "jefe") {
      contenido += `<p style="font-family: si;">Como jefe, tienes acceso completo al panel administrativo de usuarios, productos y asignaciones.</p>`;
    } else if (tipo === "empleado") {
      contenido += `<p style="font-family: si;">Como empleado, puedes gestionar tareas asignadas, ver productos disponibles y mantener el sistema al día.</p>`;
    } else if (tipo === "comprador") {
      contenido += `<p style="font-family: si;">¡Explora las últimas motocicletas, marcas y modelos! Aprovecha las mejores ofertas diseñadas para ti.</p>`;
    }

    intro.innerHTML = contenido;
  }
});
</script>






</body>






</html>
